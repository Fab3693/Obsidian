Достижения:
1. Исправил баг двойного начисления, внедрил идемпотентность (transaction\_id+campaign\_id), upsert и optimistic locking для предотвращения race condition.
2. Внедрил Redis-кэш для балансов и идемпотентности, добавил TTL и инвалидирование, снизив нагрузку на базу.
3. Улучшил архитектуру: выделил доменный слой, внедрил DTO и валидацию, рефакторинг сервисов, статический анализ, сократил технический долг.
4. Реализовал split payout: распределение cashback по правилам (например, 70/30), атомарные транзакции и Kafka-события с идемпотентностью.
5. Запустил "Планировщик промо-компаний"(campaign scheduler). Позволил запускать и останавливать кампании по расписанию без релиза кода, что сократило ручные операции маркетинга.
6. Smart throttling промо — защита бюджета кампаний — реализовал распределённый счётчик в Redis для контроля лимитов по кампании/мерчанту. При превышении автоматически переключал правило на «paused». Результат: предотвращено перерасходование бюджета у крупных кампаний.
7. Фича «Повторный платёж / подписки» (recurring cashback) — детекция подписочных транзакций, планировщик батчей для расчёта (Spring Scheduler) + асинхронная публикация событий в Kafka 2.8, idempotency по subscription\_id и transactional outbox на PostgreSQL 13. Результат: автоматизация подписок и снижение ручных начислений на 95%.