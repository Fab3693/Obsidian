# üìÑ **Choreography (–•–æ—Ä–µ–æ–≥—Ä–∞—Ñ–∏—è)**

### üìù **–ß—Ç–æ —ç—Ç–æ –∏ –∑–∞—á–µ–º –Ω—É–∂–Ω–æ**

**Choreography (—Ö–æ—Ä–µ–æ–≥—Ä–∞—Ñ–∏—è)** ‚Äî —ç—Ç–æ —Å–ø–æ—Å–æ–± –∫–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏–∏ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è –º–µ–∂–¥—É [[Microservices|–º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–∞–º–∏]] –±–µ–∑ —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–≥–æ —É–ø—Ä–∞–≤–ª—è—é—â–µ–≥–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞.  
–ö–∞–∂–¥—ã–π —Å–µ—Ä–≤–∏—Å **—Ä–µ–∞–≥–∏—Ä—É–µ—Ç –Ω–∞ —Å–æ–±—ã—Ç–∏—è** –∏ —Å–∞–º —Ä–µ—à–∞–µ—Ç, —á—Ç–æ –¥–µ–ª–∞—Ç—å –¥–∞–ª—å—à–µ.  
–í–º–µ—Å—Ç–æ –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä–∞ (—Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω–æ–≥–æ "–¥–∏—Ä–∏–∂—ë—Ä–∞") –≤ —Ö–æ—Ä–µ–æ–≥—Ä–∞—Ñ–∏–∏ –µ—Å—Ç—å –Ω–∞–±–æ—Ä —Å–µ—Ä–≤–∏—Å–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –æ–±–º–µ–Ω–∏–≤–∞—é—Ç—Å—è —Å–æ–±—ã—Ç–∏—è–º–∏ —á–µ—Ä–µ–∑ [[Message Broker|–±—Ä–æ–∫–µ—Ä —Å–æ–æ–±—â–µ–Ω–∏–π]].

–ì–ª–∞–≤–Ω–∞—è —Ü–µ–ª—å: **—Å–ª–∞–±–∞—è —Å–≤—è–∑–Ω–æ—Å—Ç—å –∏ –æ—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å** —Å–∏—Å—Ç–µ–º—ã –∑–∞ —Å—á—ë—Ç —Å–æ–±—ã—Ç–∏–π–Ω–æ-–æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã.

---

### ‚ö° **–û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏**

- üìç **–ù–µ—Ç –µ–¥–∏–Ω–æ–π —Ç–æ—á–∫–∏ –æ—Ç–∫–∞–∑–∞** ‚Äî —Å–∏—Å—Ç–µ–º–∞ –¥–µ—Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–∞.
    
- üîë **–°–ª–∞–±–∞—è —Å–≤—è–∑–Ω–æ—Å—Ç—å** ‚Äî —Å–µ—Ä–≤–∏—Å—ã –∑–Ω–∞—é—Ç —Ç–æ–ª—å–∫–æ –æ —Å–æ–±—ã—Ç–∏—è—Ö, –∞ –Ω–µ –æ –¥—Ä—É–≥–∏—Ö —Å–µ—Ä–≤–∏—Å–∞—Ö –Ω–∞–ø—Ä—è–º—É—é.
    
- ‚ûï **–õ–µ–≥–∫–æ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞—Ç—å** ‚Äî –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ —Å–µ—Ä–≤–∏—Å—ã, –ø–æ–¥–ø–∏—Å—ã–≤–∞—è –∏—Ö –Ω–∞ —Å–æ–±—ã—Ç–∏—è.
    
- ‚ûñ **–°–ª–æ–∂–Ω–µ–µ –æ—Ç–ª–∞–∂–∏–≤–∞—Ç—å** ‚Äî –Ω–µ—Ç –µ–¥–∏–Ω–æ–≥–æ "–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞", –ø–æ—Ç–æ–∫ —Å–æ–±—ã—Ç–∏–π –º–æ–∂–µ—Ç –±—ã—Ç—å —Ö–∞–æ—Ç–∏—á–Ω—ã–º.
    
- üîÑ **–ü–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è SAGA** ‚Äî —à–∞–≥–∏ —Å–∞–≥–∏ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –ø–æ —Å–æ–±—ã—Ç–∏—è–º, –±–µ–∑ —Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω–æ–≥–æ –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä–∞.
    

---

### üìå **–ü—Ä–∏–º–µ—Ä (SAGA —á–µ—Ä–µ–∑ —Ö–æ—Ä–µ–æ–≥—Ä–∞—Ñ–∏—é)**

#### –°—Ü–µ–Ω–∞—Ä–∏–π: —Å–æ–∑–¥–∞–Ω–∏–µ –∑–∞–∫–∞–∑–∞ –≤ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç-–º–∞–≥–∞–∑–∏–Ω–µ

1. **OrderService** —Å–æ–∑–¥–∞—ë—Ç –∑–∞–∫–∞–∑ ‚Üí –ø—É–±–ª–∏–∫—É–µ—Ç —Å–æ–±—ã—Ç–∏–µ `OrderCreated`.
    
2. **PaymentService** —Å–ª—É—à–∞–µ—Ç `OrderCreated` ‚Üí —Å–ø–∏—Å—ã–≤–∞–µ—Ç –¥–µ–Ω—å–≥–∏ ‚Üí –ø—É–±–ª–∏–∫—É–µ—Ç `PaymentCompleted`.
    
3. **InventoryService** —Å–ª—É—à–∞–µ—Ç `PaymentCompleted` ‚Üí —Ä–µ–∑–µ—Ä–≤–∏—Ä—É–µ—Ç —Ç–æ–≤–∞—Ä ‚Üí –ø—É–±–ª–∏–∫—É–µ—Ç `InventoryReserved`.
    
4. **ShippingService** —Å–ª—É—à–∞–µ—Ç `InventoryReserved` ‚Üí –æ—Ä–≥–∞–Ω–∏–∑—É–µ—Ç –¥–æ—Å—Ç–∞–≤–∫—É.
    

–ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫ ‚Äî —Å–µ—Ä–≤–∏—Å –ø—É–±–ª–∏–∫—É–µ—Ç —Å–æ–±—ã—Ç–∏–µ –∫–æ–º–ø–µ–Ω—Å–∞—Ü–∏–∏ (`PaymentFailed`, `InventoryFailed` –∏ —Ç.–¥.), –∏ –¥—Ä—É–≥–∏–µ —Å–µ—Ä–≤–∏—Å—ã —Ä–µ–∞–≥–∏—Ä—É—é—Ç.

---

### üìå **Java + Spring Boot + Kafka (–ø—Ä–∏–º–µ—Ä)**

```java
@Service
public class PaymentService {
    @KafkaListener(topics = "order-created")
    public void handleOrderCreated(OrderCreatedEvent event) {
        try {
            processPayment(event.getOrderId());
            kafkaTemplate.send("payment-completed", new PaymentCompletedEvent(event.getOrderId()));
        } catch (Exception e) {
            kafkaTemplate.send("payment-failed", new PaymentFailedEvent(event.getOrderId()));
        }
    }
}
```

‚úÖ –ó–¥–µ—Å—å `PaymentService` –Ω–µ –∑–Ω–∞–µ—Ç –ø—Ä–æ –¥—Ä—É–≥–∏–µ —Å–µ—Ä–≤–∏—Å—ã ‚Äî –æ–Ω –ø—Ä–æ—Å—Ç–æ —Å–ª—É—à–∞–µ—Ç —Å–æ–±—ã—Ç–∏–µ –∏ –ø—É–±–ª–∏–∫—É–µ—Ç –Ω–æ–≤–æ–µ.

---

### üß† **–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –∏ –ø–æ–¥–≤–æ–¥–Ω—ã–µ –∫–∞–º–Ω–∏**

- ‚ùó –°–∏—Å—Ç–µ–º–∞ –º–æ–∂–µ—Ç –±—ã—Ç—å **eventually consistent** (—Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç—å –Ω–µ –º–≥–Ω–æ–≤–µ–Ω–Ω–∞—è).
    
- üì¶ –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –±–∏–∑–Ω–µ—Å-–ø—Ä–æ—Ü–µ—Å—Å–∞ —Å–ª–æ–∂–Ω–µ–µ ‚Äî –Ω—É–∂–Ω—ã **event tracing** –∏ [[Distributed Tracing|—Ä–∞—Å–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã–µ –ª–æ–≥–∏]].
    
- üîç –í–æ–∑–º–æ–∂–µ–Ω **—Ö–∞–æ—Å —Å–æ–±—ã—Ç–∏–π** ‚Äî –µ—Å–ª–∏ –ø–ª–æ—Ö–æ —Å–ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞—Ç—å, —Å–µ—Ä–≤–∏—Å—ã –±—É–¥—É—Ç –ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å —Å–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ —Å–∏–≥–Ω–∞–ª–æ–≤.
    
- üèé –ò–¥–µ–∞–ª—å–Ω–æ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è —Å–∏—Å—Ç–µ–º —Å –≤—ã—Å–æ–∫–æ–π –Ω–∞–≥—Ä—É–∑–∫–æ–π –∏ –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã–º–∏ —Å–µ—Ä–≤–∏—Å–∞–º–∏.
    

---

### üìä **–í–∏–∑—É–∞–ª—å–Ω–æ–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ**

```
[OrderService] --(OrderCreated)--> [PaymentService] --(PaymentCompleted)--> [InventoryService] --(InventoryReserved)--> [ShippingService]
```

---

### üíº **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –Ω–∞ –ø—Ä–∞–∫—Ç–∏–∫–µ**

1. **–ò–Ω—Ç–µ—Ä–Ω–µ—Ç-–º–∞–≥–∞–∑–∏–Ω**
    
    - OrderService ‚Üí PaymentService ‚Üí InventoryService ‚Üí ShippingService.
        
2. **–°–∏—Å—Ç–µ–º–∞ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –±–∏–ª–µ—Ç–æ–≤**
    
    - BookingService –ø—É–±–ª–∏–∫—É–µ—Ç —Å–æ–±—ã—Ç–∏–µ ‚Üí PaymentService —Å–ø–∏—Å—ã–≤–∞–µ—Ç –¥–µ–Ω—å–≥–∏ ‚Üí SeatService —Ä–µ–∑–µ—Ä–≤–∏—Ä—É–µ—Ç –º–µ—Å—Ç–æ.
        
3. **–ë–∞–Ω–∫–æ–≤—Å–∫–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏**
    
    - TransactionService –ø—É–±–ª–∏–∫—É–µ—Ç —Å–æ–±—ã—Ç–∏–µ ‚Üí FraudDetectionService –ø—Ä–æ–≤–µ—Ä—è–µ—Ç ‚Üí NotificationService —É–≤–µ–¥–æ–º–ª—è–µ—Ç –∫–ª–∏–µ–Ω—Ç–∞.
        

---

### üéØ **–¢–∏–ø–∏—á–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã –Ω–∞ —Å–æ–±–µ—Å–µ–¥–æ–≤–∞–Ω–∏–∏ (—Å –æ—Ç–≤–µ—Ç–∞–º–∏)**

1. ‚ùì –ß—Ç–æ —Ç–∞–∫–æ–µ —Ö–æ—Ä–µ–æ–≥—Ä–∞—Ñ–∏—è?  
    üëâ –≠—Ç–æ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏—è –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–æ–≤ —á–µ—Ä–µ–∑ —Å–æ–±—ã—Ç–∏—è, –±–µ–∑ —Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω–æ–≥–æ –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä–∞.
    
2. ‚ùì –ß–µ–º –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è —Ö–æ—Ä–µ–æ–≥—Ä–∞—Ñ–∏—è –æ—Ç –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏–∏?  
    üëâ –û—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è ‚Äî —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ—Ü–µ—Å—Å–æ–º (–¥–∏—Ä–∏–∂—ë—Ä).  
    üëâ –•–æ—Ä–µ–æ–≥—Ä–∞—Ñ–∏—è ‚Äî –¥–µ—Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ —Å–æ–±—ã—Ç–∏—è (–∫–∞–∂–¥—ã–π —Ç–∞–Ω—Ü—É–µ—Ç —Å–≤–æ—é –ø–∞—Ä—Ç–∏—é).
    
3. ‚ùì –ö–∞–∫–∏–µ –ø–ª—é—Å—ã —Ö–æ—Ä–µ–æ–≥—Ä–∞—Ñ–∏–∏?  
    üëâ –°–ª–∞–±–∞—è —Å–≤—è–∑–Ω–æ—Å—Ç—å, –æ—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å, –ª—ë–≥–∫–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ.
    
4. ‚ùì –ö–∞–∫–∏–µ –º–∏–Ω—É—Å—ã?  
    üëâ –°–ª–æ–∂–Ω–æ—Å—Ç—å –æ—Ç–ª–∞–¥–∫–∏, —Ö–∞–æ—Å —Å–æ–±—ã—Ç–∏–π, eventual consistency.
    
5. ‚ùì –ì–¥–µ –ª—É—á—à–µ –ø—Ä–∏–º–µ–Ω—è—Ç—å?  
    üëâ –í —Å–∏—Å—Ç–µ–º–∞—Ö —Å –±–æ–ª—å—à–∏–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã—Ö —Å–µ—Ä–≤–∏—Å–æ–≤ –∏ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–º–∏ –ø—Ä–æ—Ü–µ—Å—Å–∞–º–∏.
    
6. ‚ùì –ú–æ–∂–Ω–æ –ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ö–æ—Ä–µ–æ–≥—Ä–∞—Ñ–∏—é –¥–ª—è SAGA?  
    üëâ –î–∞, —ç—Ç–æ –æ–¥–∏–Ω –∏–∑ –ø–æ–¥—Ö–æ–¥–æ–≤ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ SAGA (–∫–∞–∂–¥—ã–π —Å–µ—Ä–≤–∏—Å —Ä–µ–∞–≥–∏—Ä—É–µ—Ç –Ω–∞ —Å–æ–±—ã—Ç–∏—è).
    

---

### üîó **–°–≤—è–∑–∞–Ω–Ω—ã–µ —Ç–µ—Ä–º–∏–Ω—ã**

- [[SAGA|SAGA]]
    
- [[Orchestration|–û—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è]]
    
- [[Microservices|–ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å—ã]]
    
- [[Event-Driven Architecture|–°–æ–±—ã—Ç–∏–π–Ω–æ-–æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞]]
    
- [[Message Broker|Message Broker]]
    

---

### üè∑ **–¢–µ–≥–∏**

#microservices #architecture #saga #event-driven

---